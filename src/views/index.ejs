<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Image Processor API</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  </head>

  <body style="height: 100vh">
    <div class="container h-100 p-3">
      <div class="row justify-content-md-center align-content-md-center h-20">
        <div class="col-md-auto bg-danger rounded text-white">
          <h3>Please choose a photo</h3>
        </div>
      </div>

      <div class="row justify-content-md-center align-content-md-center p-3">
        <div class="list-group w-50 overflow-auto" style="height: 220px">
          <% imageNames.map(image => { %>

          <li
            id="<%= image %>"
            onclick="selectItem('<%= image %>')"
            class="list-group-item list-group-item-action"
            style="cursor: pointer"
          >
            <%= image %>
          </li>
          <% })%>
        </div>
      </div>
      <div class="row justify-content-md-center align-content-md-center h-20">
        <div class="col-md-auto bg-danger rounded text-white">
          <h5>Choose dimensions</h5>
        </div>
      </div>
      <div class="row justify-content-center">
        <div class="col-sm-3 input-group input-group-sm mb-1 p-3">
          <span class="input-group-text" id="inputGroup-sizing-sm">Width</span>
          <input
            type="text"
            id="_width"
            class="form-control"
            aria-label="Sizing example input"
            aria-describedby="inputGroup-sizing-sm"
          />
        </div>
        <div class="col-sm-3 input-group input-group-sm mb-1 p-3">
          <span class="input-group-text" id="inputGroup-sizing-sm">Height</span>
          <input
            type="text"
            id="_height"
            class="form-control"
            aria-label="Sizing example input"
            aria-describedby="inputGroup-sizing-sm"
          />
        </div>
        <button
          onclick="onSubmit()"
          type="button"
          class="btn btn-danger"
          style="width: fit-content"
        >
          Submit
        </button>
      </div>
    </div>

    <script>
      let filename = "";
      function onSubmit() {
        const width = document.getElementById("_width").value;
        const height = document.getElementById("_height").value;

        location.href = `http://localhost:5000/image?filename=${filename}&height=${height}&width=${width}`;
      }
      function selectItem(name) {
        $(".list-group-item-action").removeClass(
          "list-group-item-action active"
        );
        $(`#${name}`).toggleClass("list-group-item-action active");

        filename = name;
      }
    </script>
  </body>
</html>
